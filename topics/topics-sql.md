**Уровень 1: Основы SQL**

**1. Введение в базы данных и SQL:**

*   **1.1. Понятие базы данных:**
    *   Определение базы данных (БД).
    *   Цели и задачи использования БД.
    *   Различные типы БД (реляционные, нереляционные, объектно-ориентированные и т.д.).
    *   Основные компоненты БД (таблицы, поля, записи, ключи).
    *   Примеры популярных СУБД (MySQL, PostgreSQL, Oracle, SQL Server).
*   **1.2. Реляционная модель данных:**
    *   Основные понятия реляционной модели: отношение, атрибут, кортеж, домен.
    *   Первичные и внешние ключи, обеспечение целостности данных.
    *   Понятие нормализации и ее цель.
    *   Нормальные формы (1НФ, 2НФ, 3НФ, BCNF).
    *   Связи между таблицами (один-к-одному, один-ко-многим, многие-ко-многим).
*   **1.3. Основы языка SQL:**
    *   История и стандарты SQL (SQL-86, SQL-89, SQL-92, SQL:1999, SQL:2003, SQL:2008, SQL:2011, SQL:2016).
    *   Типы операторов SQL (DDL, DML, DCL, TCL).
    *   Синтаксис и структура SQL-запросов.
    *   Использование комментариев в SQL.
    *   Регистронезависимость SQL (в большинстве СУБД).
*   **1.4. Клиент-серверная архитектура:**
    *   Понимание работы клиент-серверных СУБД.
    *   Роль клиента и сервера в обработке SQL запросов.
    *   Взаимодействие между клиентом и сервером (подключение, аутентификация, выполнение запросов).

**2. Извлечение данных (SELECT):**

*   **2.1. Базовый синтаксис SELECT:**
    *   Выборка всех столбцов из таблицы (`SELECT *`).
    *   Выборка определенных столбцов (`SELECT column1, column2`).
    *   Использование псевдонимов для столбцов (`SELECT column1 AS alias1`).
    *   Ключевое слово `FROM` для указания таблицы.
*   **2.2. Фильтрация данных (WHERE):**
    *   Операторы сравнения (`=`, `!=`, `>`, `<`, `>=`, `<=`).
    *   Логические операторы (`AND`, `OR`, `NOT`).
    *   Оператор `BETWEEN` для указания диапазона значений.
    *   Оператор `IN` для проверки принадлежности значения списку.
    *   Оператор `LIKE` для поиска по шаблону (с использованием `%` и `_`).
    *   Оператор `IS NULL` и `IS NOT NULL` для проверки на наличие пустых значений.
*   **2.3. Сортировка данных (ORDER BY):**
    *   Сортировка по одному столбцу (по возрастанию `ASC` и по убыванию `DESC`).
    *   Сортировка по нескольким столбцам.
*   **2.4. Ограничение количества строк (LIMIT/OFFSET, FETCH/OFFSET):**
    *   Ограничение количества возвращаемых строк с помощью `LIMIT` (MySQL, PostgreSQL) или `TOP` (SQL Server).
    *   Пропуск определенного количества строк с помощью `OFFSET`.
    *   Использование `FETCH FIRST` / `OFFSET` для пагинации данных в соответствии со стандартом SQL.

**3. Манипулирование данными (INSERT, UPDATE, DELETE):**

*   **3.1. Добавление данных (INSERT):**
    *   Вставка одной строки данных (`INSERT INTO table (column1, column2) VALUES (value1, value2)`).
    *   Вставка нескольких строк данных.
    *   Вставка данных из другой таблицы (`INSERT INTO table1 SELECT ... FROM table2`).
*   **3.2. Обновление данных (UPDATE):**
    *   Обновление значений в определенных столбцах (`UPDATE table SET column1 = value1 WHERE condition`).
    *   Обновление нескольких столбцов.
    *   Обновление данных на основе данных из другой таблицы.
*   **3.3. Удаление данных (DELETE):**
    *   Удаление строк, удовлетворяющих определенному условию (`DELETE FROM table WHERE condition`).
    *   Удаление всех строк из таблицы (`DELETE FROM table` или `TRUNCATE TABLE`).
    *   Разница между `DELETE` и `TRUNCATE TABLE`.

**4. Работа с таблицами (DDL):**

*   **4.1. Создание таблиц (CREATE TABLE):**
    *   Определение структуры таблицы (имена столбцов, типы данных).
    *   Основные типы данных (INT, VARCHAR, TEXT, DATE, DATETIME, BOOLEAN и т.д.).
    *   Определение первичного ключа (`PRIMARY KEY`).
    *   Определение внешних ключей (`FOREIGN KEY`) и ограничений целостности (`REFERENCES`).
    *   Ограничения `NOT NULL`, `UNIQUE`, `CHECK`.
    *   Значения по умолчанию (`DEFAULT`).
    *   Автоинкрементные столбцы (`AUTO_INCREMENT`, `IDENTITY`).
*   **4.2. Изменение структуры таблиц (ALTER TABLE):**
    *   Добавление столбцов.
    *   Удаление столбцов.
    *   Изменение типа данных столбца.
    *   Добавление и удаление ограничений.
    *   Переименование столбцов и таблиц.
*   **4.3. Удаление таблиц (DROP TABLE):**
    *   Удаление таблицы из базы данных.
    *   Опция `CASCADE` для каскадного удаления связанных объектов.
*   **4.4. Работа с индексами (CREATE INDEX, DROP INDEX):**
    *   Понятие индекса и его назначение.
    *   Типы индексов (уникальные, неуникальные, составные).
    *   Влияние индексов на производительность запросов.
    *   Создание и удаление индексов.
*   **4.5. Работа с представлениями (CREATE VIEW, DROP VIEW):**
    *   Понятие представления и его назначение.
    *   Создание и удаление представлений.
    *   Обновляемые и необновляемые представления.

**Уровень 2: Продвинутый SQL**

**5. Объединение таблиц (JOIN):**

*   **5.1. Внутреннее соединение (INNER JOIN):**
    *   Возвращает строки, для которых условие соединения истинно в обеих таблицах.
    *   Различные способы записи `INNER JOIN` (явное и неявное соединение).
*   **5.2. Внешнее соединение (LEFT/RIGHT/FULL OUTER JOIN):**
    *   `LEFT OUTER JOIN`: возвращает все строки из левой таблицы и соответствующие строки из правой таблицы. Если соответствия нет, то в столбцах правой таблицы будут значения `NULL`.
    *   `RIGHT OUTER JOIN`: аналогично `LEFT OUTER JOIN`, но для правой таблицы.
    *   `FULL OUTER JOIN`: возвращает все строки из обеих таблиц. Если соответствия нет, то в столбцах отсутствующей таблицы будут значения `NULL`.
*   **5.3. Самосоединение (SELF JOIN):**
    *   Соединение таблицы с самой собой, используется для сравнения данных в одной и той же таблице.
*   **5.4. Перекрестное соединение (CROSS JOIN):**
    *   Возвращает декартово произведение двух таблиц (каждая строка из первой таблицы соединяется с каждой строкой из второй таблицы).
*   **5.5. Естественное соединение (NATURAL JOIN):**
    *   Автоматическое соединение таблиц по столбцам с одинаковыми именами.
*   **5.6. Условное соединение (JOIN ... ON ...):**
    *   Более предпочтительный и современный способ записи соединения.
*   **5.7. Использование псевдонимов таблиц:**
    *   Упрощение синтаксиса при работе с `JOIN`.

**6. Агрегатные функции и группировка:**

*   **6.1. Агрегатные функции:**
    *   `COUNT()`: подсчет количества строк.
    *   `SUM()`: вычисление суммы значений.
    *   `AVG()`: вычисление среднего значения.
    *   `MIN()`: поиск минимального значения.
    *   `MAX()`: поиск максимального значения.
    *   Использование `DISTINCT` с агрегатными функциями.
*   **6.2. Группировка данных (GROUP BY):**
    *   Группировка строк по значению одного или нескольких столбцов.
    *   Использование агрегатных функций с `GROUP BY`.
    *   Фильтрация групп с помощью `HAVING`.
    *   Разница между `WHERE` и `HAVING`.
*   **6.3. ROLLUP, CUBE, GROUPING SETS:**
    *   Расширенные возможности группировки для создания подитогов и итогов.

**7. Подзапросы:**

*   **7.1. Понятие подзапроса:**
    *   Вложенный запрос, который выполняется внутри другого запроса.
*   **7.2. Типы подзапросов:**
    *   Скалярные подзапросы (возвращают одно значение).
    *   Подзапросы, возвращающие множество строк и столбцов.
    *   Коррелированные подзапросы (подзапрос ссылается на столбец из внешнего запроса).
*   **7.3. Использование подзапросов в различных частях запроса:**
    *   В предложении `FROM`.
    *   В предложении `WHERE` (с операторами `IN`, `EXISTS`, `ANY`, `ALL`).
    *   В предложении `SELECT`.
    *   В предложении `HAVING`.
*   **7.4. Производительность подзапросов:**
    *   Сравнение производительности подзапросов и соединений.
    *   Оптимизация подзапросов.
*   **7.5. Общие табличные выражения (CTE):**
    *   Использование `WITH` для определения именованных подзапросов.
    *   Рекурсивные CTE.

**8. Оконные функции:**

*   **8.1. Понятие оконной функции:**
    *   Вычисление значения на основе набора строк, называемого "окном".
*   **8.2. Синтаксис оконных функций:**
    *   Использование `OVER` для определения окна.
    *   `PARTITION BY` для разделения данных на группы.
    *   `ORDER BY` для упорядочивания строк в окне.
    *   Определение рамки окна (`ROWS` или `RANGE`).
*   **8.3. Типы оконных функций:**
    *   Агрегатные функции (те же, что и в `GROUP BY`).
    *   Ранжирующие функции (`RANK`, `DENSE_RANK`, `ROW_NUMBER`, `NTILE`).
    *   Функции смещения (`LAG`, `LEAD`, `FIRST_VALUE`, `LAST_VALUE`).
*   **8.4. Примеры использования оконных функций:**
    *   Вычисление скользящего среднего.
    *   Поиск разницы между соседними строками.
    *   Ранжирование данных в группе.

**Уровень 3: Эксперт SQL**

**9. Транзакции и управление блокировками:**

*   **9.1. Понятие транзакции:**
    *   Последовательность операций, которая рассматривается как единое целое.
    *   Свойства ACID (атомарность, согласованность, изолированность, долговечность).
*   **9.2. Управление транзакциями:**
    *   `START TRANSACTION` (или `BEGIN`) для начала транзакции.
    *   `COMMIT` для сохранения изменений.
    *   `ROLLBACK` для отмены изменений.
*   **9.3. Уровни изоляции транзакций:**
    *   `READ UNCOMMITTED`.
    *   `READ COMMITTED`.
    *   `REPEATABLE READ`.
    *   `SERIALIZABLE`.
    *   Проблемы, возникающие при разных уровнях изоляции (грязное чтение, неповторяющееся чтение, фантомное чтение).
*   **9.4. Блокировки:**
    *   Разделяемые и эксклюзивные блокировки.
    *   Взаимоблокировки (deadlocks) и способы их разрешения.
    *   Явное управление блокировками (`SELECT ... FOR UPDATE`, `SELECT ... FOR SHARE`).

**10. Хранимые процедуры и функции:**

*   **10.1. Понятие хранимой процедуры:**
    *   Набор инструкций SQL, который хранится на сервере и может быть вызван по имени.
*   **10.2. Создание и вызов хранимых процедур:**
    *   Синтаксис `CREATE PROCEDURE`.
    *   Параметры хранимых процедур (входные, выходные, входные-выходные).
    *   Вызов хранимых процедур с помощью `CALL`.
*   **10.3. Понятие функции:**
    *   Аналогично хранимой процедуре, но возвращает значение.
*   **10.4. Создание и вызов функций:**
    *   Синтаксис `CREATE FUNCTION`.
    *   Типы функций (скалярные, табличные).
    *   Вызов функций в SQL-запросах.
*   **10.5. Преимущества использования хранимых процедур и функций:**
    *   Повышение производительности.
    *   Улучшение безопасности.
    *   Повторное использование кода.
    *   Упрощение поддержки кода.

**11. Триггеры:**

*   **11.1. Понятие триггера:**
    *   Специальный тип хранимой процедуры, который автоматически выполняется при возникновении определенного события (вставка, обновление, удаление данных).
*   **11.2. Типы триггеров:**
    *   `BEFORE` триггеры.
    *   `AFTER` триггеры.
    *   `INSTEAD OF` триггеры.
*   **11.3. Создание и использование триггеров:**
    *   Синтаксис `CREATE TRIGGER`.
    *   Доступ к старым и новым значениям в триггере (`OLD`, `NEW`).
    *   Примеры использования триггеров (аудит изменений, обеспечение целостности данных).

**12. Оптимизация запросов:**

*   **12.1. Анализ плана выполнения запроса:**
    *   Использование `EXPLAIN` (MySQL, PostgreSQL) или `SHOW PLAN` (SQL Server) для анализа плана выполнения.
    *   Понимание различных типов операций в плане выполнения (Table Scan, Index Scan, Index Seek, Nested Loops, Hash Match, Merge Join и т.д.).
*   **12.2. Индексирование:**
    *   Создание индексов для часто используемых столбцов в условиях `WHERE`, `JOIN` и `ORDER BY`.
    *   Выбор подходящего типа индекса.
    *   Влияние порядка столбцов в составном индексе.
*   **12.3. Переписывание запросов:**
    *   Изменение структуры запроса для повышения производительности.
    *   Использование соединений вместо подзапросов (по возможности).
    *   Избегание использования `OR` в `WHERE` (по возможности).
    *   Использование `EXISTS` вместо `COUNT(*)` для проверки наличия данных.
*   **12.4. Кэширование запросов:**
    *   Понимание работы кэша запросов в СУБД.
    *   Влияние кэша на производительность.
*   **12.5. Статистика:**
    *   Важность сбора статистики по таблицам для оптимизатора запросов.
    *   Обновление статистики.

**13. Безопасность:**

*   **13.1. SQL-инъекции:**
    *   Понимание уязвимости SQL-инъекций.
    *   Способы защиты от SQL-инъекций (параметризованные запросы, подготовленные выражения).
*   **13.2. Управление пользователями и привилегиями:**
    *   Создание и удаление пользователей.
    *   Предоставление и отзыв привилегий (`GRANT`, `REVOKE`).
    *   Роли пользователей.
*   **13.3. Шифрование данных:**
    *   Шифрование данных на уровне приложения.
    *   Шифрование данных на уровне СУБД.
    *   Прозрачное шифрование данных (TDE).

**14. Расширенные возможности SQL (зависит от СУБД):**

*   **14.1. Работа с JSON и XML:**
    *   Функции для работы с данными в формате JSON и XML.
    *   Хранение и извлечение данных в формате JSON и XML.
*   **14.2. Полнотекстовый поиск:**
    *   Создание полнотекстовых индексов.
    *   Выполнение полнотекстового поиска.
*   **14.3. Геопространственные данные:**
    *   Типы данных для хранения геопространственной информации.
    *   Функции для работы с геопространственными данными.
*   **14.4. Регулярные выражения:**
    *   Использование регулярных выражений в SQL-запросах.
*   **14.5 Материализованные представления:**
    *   Создание материализованных представлений для ускорения доступа к данным.
    *   Обновление материализованных представлений.
