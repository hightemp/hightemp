**I. Основы и Концепции:**

1. **Введение в Контейнеризацию:**

    *   **Что такое контейнеры?**
        *   Отличия от виртуальных машин.
        *   Преимущества и недостатки контейнеризации.
        *   Основные понятия: образ, контейнер, реестр образов.
    *   **Docker - Основы:**
        *   Установка и настройка Docker.
        *   Работа с образами: сборка, скачивание, загрузка, удаление.
        *   Работа с контейнерами: запуск, остановка, удаление, просмотр логов, подключение к контейнеру.
        *   Dockerfile: написание инструкций для сборки образов.
        *   Работа с Docker Compose для управления многоконтейнерными приложениями.
    *   **Другие технологии контейнеризации:**
        *   rkt, containerd, LXC/LXD - обзор и сравнение.

2. **Введение в Оркестрацию Контейнеров:**

    *   **Проблемы управления контейнерами в production среде.**
    *   **Что такое оркестрация контейнеров?**
        *   Автоматизация развертывания, масштабирования, управления и обновления приложений.
        *   Основные задачи оркестраторов.
    *   **Сравнение оркестраторов:**
        *   Kubernetes, Docker Swarm, Apache Mesos - преимущества и недостатки, области применения.

3. **Основы Kubernetes:**

    *   **История и предпосылки создания Kubernetes.**
    *   **Архитектура Kubernetes:**
        *   **Master Node (Control Plane):**
            *   **API Server:** Взаимодействие с кластером, аутентификация, авторизация.
            *   **etcd:** Распределенное хранилище конфигурации и состояния кластера.
            *   **Scheduler:** Назначение Pod'ов на узлы, учет ресурсов и ограничений.
            *   **Controller Manager:** Управление различными контроллерами (Replication, Node, Endpoint, etc.).
            *   **Cloud Controller Manager:** Взаимодействие с облачными провайдерами (опционально).
        *   **Worker Node (Node):**
            *   **Kubelet:** Агент на каждом узле, управление контейнерами и Pod'ами.
            *   **Kube-proxy:** Сетевой прокси, обеспечение доступа к сервисам.
            *   **Container Runtime:** Среда выполнения контейнеров (Docker, containerd, CRI-O).
    *   **Основные объекты Kubernetes:**
        *   **Pod:** Минимальная единица развертывания, группа из одного или нескольких контейнеров.
        *   **Node:** Физический или виртуальный сервер, на котором запускаются Pod'ы.
        *   **Namespace:** Виртуальное разделение кластера на логические области.
        *   **Label:** Метки для группировки и выбора объектов.
        *   **Annotation:** Дополнительная метаинформация об объектах.
        *   **Selector:** Способ выбора объектов по меткам.

**II. Основные Объекты и Ресурсы:**

4. **Работа с Pod'ами:**

    *   **Жизненный цикл Pod'а:**
        *   Pending, Running, Succeeded, Failed, Unknown.
        *   Фазы инициализации, работы и завершения.
    *   **Создание Pod'ов:**
        *   YAML манифесты.
        *   Определение контейнеров, портов, переменных окружения, томов.
        *   Init Containers: контейнеры, выполняющиеся перед основными контейнерами.
    *   **Управление ресурсами Pod'ов:**
        *   Requests и Limits для CPU и памяти.
        *   Quality of Service (QoS) классы: Guaranteed, Burstable, BestEffort.
    *   **Здоровье Pod'ов:**
        *   Liveness probes: проверка работоспособности контейнера.
        *   Readiness probes: проверка готовности контейнера к обслуживанию трафика.
        *   Startup probes: проверка успешного запуска контейнера.
    *   **Работа с несколькими контейнерами в Pod'е:**
        *   Паттерны проектирования: sidecar, adapter, ambassador.

5. **Контроллеры Развертывания:**

    *   **ReplicaSet:**
        *   Обеспечение заданного количества реплик Pod'а.
        *   Управление масштабированием.
    *   **Deployment:**
        *   Декларативное управление обновлениями приложений.
        *   Стратегии обновления: RollingUpdate, Recreate.
        *   Откат к предыдущим версиям (rollbacks).
    *   **StatefulSet:**
        *   Управление приложениями с состоянием (stateful applications).
        *   Гарантии порядка запуска и уникальности Pod'ов.
        *   Стабильные сетевые идентификаторы и хранилища.
    *   **DaemonSet:**
        *   Запуск копии Pod'а на каждом узле кластера (или на подмножестве).
        *   Примеры использования: сбор логов, мониторинг.
    *   **Job:**
        *   Запуск Pod'ов для выполнения задач, завершающихся после выполнения.
        *   Parallelism и Completions.
    *   **CronJob:**
        *   Запуск Job'ов по расписанию.

6. **Работа с Хранилищами:**

    *   **Volumes:**
        *   Типы томов: emptyDir, hostPath, persistentVolumeClaim, configMap, secret, etc.
        *   Подключение томов к Pod'ам.
    *   **PersistentVolumes (PV):**
        *   Абстракция над физическим хранилищем.
        *   Способы предоставления хранилища: static, dynamic.
        *   Access Modes: ReadWriteOnce, ReadOnlyMany, ReadWriteMany.
        *   Reclaim Policies: Retain, Delete, Recycle.
    *   **PersistentVolumeClaims (PVC):**
        *   Запрос на хранилище определенного размера и типа.
        *   Связывание PVC с PV.
    *   **StorageClass:**
        *   Динамическое создание PersistentVolumes на основе шаблонов.
        *   Определение провизионеров хранилищ (CSI drivers).
    *   **Container Storage Interface (CSI):**
        *   Стандартизированный интерфейс для подключения внешних систем хранения.
        *   CSI Drivers: интеграция с различными облачными и on-premise хранилищами.

**III. Сеть и Сервисы:**

7. **Сетевое Взаимодействие:**

    *   **Модель сети Kubernetes:**
        *   Каждый Pod имеет свой IP-адрес.
        *   Pod'ы могут общаться друг с другом без NAT.
        *   Узлы могут общаться со всеми Pod'ами без NAT.
    *   **Container Network Interface (CNI):**
        *   Стандартизированный интерфейс для настройки сети в контейнерах.
        *   CNI Plugins: Flannel, Calico, Weave Net - обзор и сравнение.
    *   **Kube-proxy и режимы работы:**
        *   userspace, iptables, IPVS.
        *   Балансировка нагрузки и маршрутизация трафика.
    *   **DNS в Kubernetes:**
        *   CoreDNS - DNS-сервер по умолчанию.
        *   Разрешение имен сервисов и Pod'ов.
        *   Настройка DNS политики.

8. **Сервисы (Services):**

    *   **Что такое Service?**
        *   Абстракция над группой Pod'ов, предоставляющая единую точку доступа.
        *   Стабильный IP-адрес и DNS имя.
    *   **Типы сервисов:**
        *   **ClusterIP:** Доступ к сервису только внутри кластера.
        *   **NodePort:** Доступ к сервису извне кластера через порт на каждом узле.
        *   **LoadBalancer:** Интеграция с облачными балансировщиками нагрузки.
        *   **ExternalName:** Перенаправление на внешний DNS-адрес.
    *   **Endpoints и EndpointSlices:**
        *   Связывание сервиса с Pod'ами.
        *   Динамическое обновление списка Pod'ов.
    *   **Headless Services:**
        *   Сервисы без ClusterIP, для прямого доступа к Pod'ам по DNS.
        *   Использование с StatefulSet.
    *   **Service Discovery:**
        *   Обнаружение сервисов внутри кластера и за его пределами.

9. **Ingress:**

    *   **Что такое Ingress?**
        *   Управление внешним доступом к сервисам в кластере.
        *   HTTP/HTTPS маршрутизация, терминирование SSL/TLS.
    *   **Ingress Controller:**
        *   Реализация Ingress (Nginx, Traefik, HAProxy).
        *   Настройка и управление Ingress Controller'ом.
    *   **Ingress Rules:**
        *   Определение правил маршрутизации трафика.
        *   Host-based routing, path-based routing.
    *   **TLS/SSL в Ingress:**
        *   Настройка шифрования трафика.
        *   Автоматическое получение сертификатов (cert-manager).

10. **Network Policies:**

    *   **Что такое Network Policy?**
        *   Управление сетевым доступом между Pod'ами.
        *   Определение правил ingress и egress.
    *   **Создание Network Policies:**
        *   Селекторы Pod'ов и пространств имен.
        *   Определение разрешенных портов и протоколов.
    *   **Примеры использования Network Policies:**
        *   Изоляция приложений в разных namespace'ах.
        *   Ограничение доступа к базам данных.
    *   **Реализация Network Policies:**
        *   CNI плагины с поддержкой Network Policies (Calico, Cilium).

**IV. Конфигурация и Безопасность:**

11. **Управление Конфигурацией:**

    *   **ConfigMaps:**
        *   Хранение конфигурационных данных в виде ключ-значение.
        *   Подключение ConfigMaps к Pod'ам в виде переменных окружения или файлов.
    *   **Secrets:**
        *   Хранение конфиденциальных данных (пароли, токены, ключи).
        *   Шифрование данных в etcd.
        *   Подключение Secrets к Pod'ам.
    *   **Управление конфигурацией приложений:**
        *   Лучшие практики разделения конфигурации и кода.
        *   Использование шаблонов конфигурации (Helm).
        *   Управление версиями конфигурации.

12. **Безопасность в Kubernetes:**

    *   **Аутентификация:**
        *   Способы аутентификации пользователей и сервисных аккаунтов.
        *   X.509 Certificates, Static Token File, Bootstrap Tokens, Service Account Tokens.
    *   **Авторизация:**
        *   **RBAC (Role-Based Access Control):**
            *   Роли (Roles) и кластерные роли (ClusterRoles).
            *   Привязка ролей (RoleBindings) и кластерные привязки ролей (ClusterRoleBindings).
            *   Управление доступом к ресурсам Kubernetes.
        *   **ABAC (Attribute-Based Access Control):**
            *   Более гибкая модель авторизации на основе атрибутов.
        *   **Node Authorization:**
            *   Ограничение доступа Kubelet'ов к API Server'у.
        *   **Webhook Authorization:**
            *   Делегирование авторизации внешнему сервису.
    *   **Pod Security Policies (PSP) - Deprecated in 1.25**
        *   Контроль параметров безопасности Pod'ов.
        *   Ограничение привилегированных контейнеров, доступа к host namespace'ам и т.д.
        *   **Замена PSP:** Pod Security Admission (PSA)
    *   **Pod Security Admission (PSA):**
        *   Профили безопасности: privileged, baseline, restricted.
        *   Настройка ограничений на уровне namespace'ов.
    *   **Сетевая безопасность:**
        *   Network Policies (см. раздел III).
    *   **Безопасность образов:**
        *   Сканирование образов на уязвимости.
        *   Использование доверенных реестров образов.
        *   Подпись образов.
    *   **Аудит:**
        *   Логирование действий в кластере.
        *   Настройка политик аудита.

**V. Расширенные Темы:**

13. **Мониторинг и Логирование:**

    *   **Мониторинг ресурсов кластера:**
        *   **Metrics Server:** Сбор метрик использования CPU, памяти, сети.
        *   **Prometheus:** Сбор, хранение и анализ метрик.
        *   **Grafana:** Визуализация метрик.
    *   **Мониторинг приложений:**
        *   Экспорт метрик из приложений.
        *   Интеграция с Prometheus.
    *   **Логирование:**
        *   Централизованный сбор логов.
        *   **Fluentd, Fluent Bit:** Сбор и обработка логов.
        *   **Elasticsearch, Kibana:** Хранение и визуализация логов.

14. **Управление Ресурсами и Планирование:**

    *   **Horizontal Pod Autoscaler (HPA):**
        *   Автоматическое масштабирование Pod'ов на основе метрик.
        *   Поддержка custom metrics и external metrics.
    *   **Vertical Pod Autoscaler (VPA):**
        *   Автоматическое изменение requests и limits для Pod'ов.
        *   Режимы работы: Off, Auto, Recreate, Initial.
    *   **Cluster Autoscaler:**
        *   Автоматическое масштабирование количества узлов в кластере.
        *   Интеграция с облачными провайдерами.
    *   **Descheduler:**
        *   Перебалансировка Pod'ов между узлами.
    *   **Taints и Tolerations:**
        *   Управление размещением Pod'ов на узлах с определенными характеристиками.
    *   **Node Affinity и Anti-Affinity:**
        *   Предпочтения и запреты для размещения Pod'ов на определенных узлах.
    *   **Pod Affinity и Anti-Affinity:**
        *   Предпочтения и запреты для размещения Pod'ов относительно друг друга.

15. **Custom Resource Definitions (CRD) и Operators:**

    *   **Custom Resource Definitions (CRD):**
        *   Расширение API Kubernetes собственными типами ресурсов.
        *   Создание и управление CRD.
    *   **Operators:**
        *   Автоматизация управления сложными приложениями.
        *   Использование CRD для определения состояния приложения.
        *   Написание собственных операторов.
        *   **Operator Framework:** Инструменты для разработки и управления операторами.
        *   **Operator Lifecycle Manager (OLM):** Установка, обновление и управление жизненным циклом операторов.

16. **Service Mesh:**

    *   **Что такое Service Mesh?**
        *   Инфраструктурный уровень для управления взаимодействием между микросервисами.
        *   Основные функции: observability, traffic management, security.
    *   **Istio:**
        *   Архитектура Istio.
        *   Envoy proxy.
        *   Управление трафиком: traffic shifting, fault injection, circuit breaking.
        *   Безопасность: mTLS, авторизация.
        *   Observability: метрики, логи, трассировка.
    *   **Linkerd:**
        *   Более легковесный Service Mesh.
        *   Основные функции и архитектура.
    *   **Другие Service Mesh:**
        *   Consul Connect, Kuma, etc.

17. **Мультикластерность и Федерация:**

    *   **Развертывание приложений в нескольких кластерах.**
    *   **Федерация кластеров:**
        *   Централизованное управление несколькими кластерами.
        *   Kubefed v2.
    *   **Мультикластерный Ingress:**
        *   Маршрутизация трафика в приложения, развернутые в разных кластерах.
    *   **Мультикластерный Service Mesh:**
        *   Взаимодействие между сервисами в разных кластерах.

**VI. Инструменты и Экосистема:**

18. **Инструменты для Работы с Kubernetes:**

    *   **kubectl:**
        *   Интерфейс командной строки для взаимодействия с кластером.
        *   Основные команды и опции.
    *   **k9s:**
        *   Терминальный UI для управления кластером.
    *   **Lens:**
        *   IDE для Kubernetes.
    *   **k3s, k0s, MicroK8s:**
        *   Легковесные дистрибутивы Kubernetes.
    *   **Minikube, kind:**
        *   Инструменты для локальной разработки.

19. **Управление Пакетами и Шаблонизация:**

    *   **Helm:**
        *   Менеджер пакетов для Kubernetes.
        *   Charts: шаблоны для развертывания приложений.
        *   Управление релизами и версиями.
    *   **Kustomize:**
        *   Инструмент для кастомизации YAML манифестов.
        *   Наложение изменений на базовые манифесты.

20. **GitOps:**

    *   **Что такое GitOps?**
        *   Управление инфраструктурой и приложениями с помощью Git.
        *   Декларативный подход.
        *   Автоматическая синхронизация состояния кластера с репозиторием.
    *   **Инструменты GitOps:**
        *   **Flux:**
            *   Непрерывная доставка приложений.
            *   Синхронизация кластера с Git репозиторием.
        *   **Argo CD:**
            *   Непрерывная доставка приложений.
            *   Веб-интерфейс и CLI.
        *   **Jenkins X:**
            *   CI/CD платформа для Kubernetes.

**VII. Сертификация:**

21. **Подготовка к Сертификационным Экзаменам:**

    *   **Certified Kubernetes Administrator (CKA):**
        *   Управление кластером, устранение неполадок, безопасность.
    *   **Certified Kubernetes Application Developer (CKAD):**
        *   Разработка, развертывание и отладка приложений в Kubernetes.
    *   **Certified Kubernetes Security Specialist (CKS):**
        *   Углубленные знания по безопасности Kubernetes.

**VIII. Практика:**

22. **Практические Задания:**

    *   **Развертывание приложений в Kubernetes:**
        *   Создание Deployment'ов, Service'ов, Ingress'ов.
        *   Масштабирование приложений.
        *   Обновление приложений.
    *   **Работа с хранилищами:**
        *   Создание PV, PVC, StorageClass.
        *   Подключение томов к Pod'ам.
    *   **Настройка сети:**
        *   Создание Network Policies.
        *   Настройка Ingress Controller'а.
    *   **Управление конфигурацией:**
        *   Использование ConfigMaps и Secrets.
    *   **Настройка мониторинга и логирования:**
        *   Развертывание Prometheus и Grafana.
        *   Настройка сбора логов.
    *   **Решение проблем:**
        *   Отладка приложений в Kubernetes.
        *   Устранение неполадок в кластере.
