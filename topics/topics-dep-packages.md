**I. Введение в deb-пакеты**

1. **Что такое deb-пакеты?**
    *   Определение deb-пакетов как формата архивов для распространения программного обеспечения в Debian и Debian-based дистрибутивах (Ubuntu, Linux Mint и т.д.).
    *   История возникновения deb-формата.
    *   Сравнение deb-пакетов с другими форматами пакетов (RPM, tar.gz и т.д.).
    *   Роль deb-пакетов в экосистеме Debian.

2. **Структура deb-пакета**
    *   Файлы и директории, составляющие deb-пакет.
        *   `debian-binary`: файл, указывающий версию формата deb-архива.
        *   `control.tar.gz`: архив, содержащий метаданные пакета.
            *   `control`: основной файл с информацией о пакете (имя, версия, зависимости и т.д.).
            *   `md5sums`: контрольные суммы файлов в пакете.
            *   Скрипты обслуживания (preinst, postinst, prerm, postrm).
            *   `conffiles`: список конфигурационных файлов.
            *   `templates`: файлы для `debconf`.
        *   `data.tar.gz`, `data.tar.bz2`, `data.tar.xz`, `data.tar.zst`: архив, содержащий файлы, устанавливаемые пакетом.
    *   Различие между бинарными и исходными deb-пакетами.

**II. Работа с deb-пакетами**

1. **Управление пакетами с помощью `dpkg`**
    *   Установка deb-пакетов: `dpkg -i <package.deb>`.
    *   Удаление deb-пакетов: `dpkg -r <package>` (удаление файлов) и `dpkg -P <package>` (удаление файлов и конфигураций).
    *   Просмотр информации о пакете: `dpkg -I <package.deb>` (информация из deb-файла) и `dpkg -l <package>` (информация об установленном пакете).
    *   Просмотр списка файлов в пакете: `dpkg -c <package.deb>` (из deb-файла) и `dpkg -L <package>` (из установленного пакета).
    *   Поиск пакета, которому принадлежит файл: `dpkg -S <path/to/file>`.
    *   Переконфигурация пакета: `dpkg-reconfigure <package>`.
    *   Проверка целостности пакета: `dpkg -V <package>`.
    *   Работа с опциями `--force-...` для решения проблем.
2. **Управление пакетами с помощью `apt`, `apt-get`, `aptitude`**
    *   Репозитории:
        *   Что такое репозитории и зачем они нужны.
        *   Файл `/etc/apt/sources.list` и директория `/etc/apt/sources.list.d/`.
        *   Добавление, удаление и управление репозиториями.
        *   Различные типы репозиториев (main, contrib, non-free, updates, security и т.д.).
    *   Установка пакетов: `apt install <package>`.
    *   Удаление пакетов: `apt remove <package>` и `apt purge <package>`.
    *   Обновление списка пакетов: `apt update`.
    *   Обновление пакетов: `apt upgrade` и `apt full-upgrade`.
    *   Поиск пакетов: `apt search <keyword>`.
    *   Просмотр информации о пакете: `apt show <package>`.
    *   Управление зависимостями: автоматическое разрешение зависимостей при установке/удалении пакетов.
    *   Использование `aptitude` для интерактивного управления пакетами.
    *   Использование `apt` vs `apt-get` vs `aptitude`.
3. **Инструменты для работы с отдельными deb-пакетами**
    *   `ar`: извлечение и создание deb-архивов.
    *   `tar`: работа с архивами `control` и `data`.
    *   `gzip`, `bzip2`, `xz`, `zstd`: утилиты сжатия, используемые в deb-пакетах.

**III. Создание deb-пакетов**

1. **Подготовка к сборке**
    *   Необходимые инструменты: `dpkg-dev`, `build-essential`, `devscripts` и другие.
    *   Структура директории исходного кода проекта.
    *   Файл `debian/changelog`: история изменений пакета.
    *   Файл `debian/control`: метаданные пакета.
        *   Описание полей файла `control` (Source, Maintainer, Section, Priority, Build-Depends, Package, Architecture, Depends, Recommends, Suggests, Conflicts, Replaces, Provides, Description и т.д.).
        *   Указание зависимостей сборки (Build-Depends).
        *   Указание зависимостей времени выполнения (Depends, Recommends, Suggests).
    *   Файл `debian/rules`: Makefile для сборки пакета.
        *   Цели файла `rules` (clean, build, binary, binary-arch, binary-indep).
        *   Использование `dh` (Debian Helper) для упрощения файла `rules`.
        *   Переменные окружения, используемые при сборке.
    *   Другие важные файлы в директории `debian/`:
        *   `copyright`: информация об авторских правах.
        *   `compat`: уровень совместимости `debhelper`.
        *   `install`: указание файлов для установки.
        *   `dirs`: создание директорий.
        *   Скрипты обслуживания (preinst, postinst, prerm, postrm).
        *   `conffiles`: конфигурационные файлы.
2. **Процесс сборки**
    *   `dpkg-source`: упаковка и распаковка исходного кода.
    *   `dpkg-buildpackage`: основная команда для сборки deb-пакета.
        *   Опции команды `dpkg-buildpackage`.
        *   Этапы сборки пакета.
    *   `debuild`: обёртка над `dpkg-buildpackage` для упрощения процесса сборки.
    *   `pbuilder`: сборка пакетов в чистом окружении.
    *   `sbuild`: альтернатива `pbuilder`.
3. **Продвинутые темы сборки**
    *   **Использование `debhelper`**:
        *   Написание собственных скриптов `debhelper`.
        *   Использование последовательностей `debhelper`.
        *   Расширения `debhelper`.
    *   **Обработка конфигурационных файлов с помощью `debconf`**:
        *   Создание шаблонов `debconf`.
        *   Использование `debconf` в скриптах обслуживания.
    *   **Создание мета-пакетов**:
        *   Пакеты, которые не содержат файлов, а только зависят от других пакетов.
    *   **Создание транзитных пакетов**:
        *   Пакеты для плавного перехода между версиями программного обеспечения.
    *   **Кросс-компиляция**:
        *   Сборка пакетов для архитектур, отличных от архитектуры сборочной машины.
    *   **Автоматизация сборки**:
        *   Использование систем непрерывной интеграции (CI) для автоматической сборки deb-пакетов.
4. **Отладка deb-пакетов**
    *   Использование `lintian` для проверки deb-пакетов на соответствие политикам Debian.
    *   Использование `piuparts` для тестирования установки, обновления и удаления пакетов.
    *   Отладка скриптов обслуживания.
    *   Анализ логов сборки.

**IV. Размещение и распространение deb-пакетов**

1. **Локальные репозитории**
    *   Создание локального репозитория с помощью `dpkg-scanpackages` и `dpkg-scansources`.
    *   Использование `reprepro` для управления локальным репозиторием.
    *   Публикация локального репозитория через веб-сервер.

2. **PPA (Personal Package Archive)**
    *   Что такое PPA и зачем они нужны.
    *   Создание PPA на Launchpad.
    *   Добавление PPA в систему.
    *   Управление PPA.

3. **Официальные репозитории Debian**
    *   Процесс попадания пакета в официальные репозитории Debian.
    *   Роль Debian Developers и Debian Maintainers.
    *   Политики Debian.

**V. Дополнительные инструменты**

1. **`equivs`**:
    *   Инструмент для создания фиктивных deb-пакетов для удовлетворения зависимостей.

2. **`alien`**:
    *   Преобразование пакетов между различными форматами (RPM, deb, tar.gz и т.д.).
