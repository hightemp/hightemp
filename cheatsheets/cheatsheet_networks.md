### Просотр pcap от tcpdump

* без резолва имен/портов (быстрее и понятнее):

  ```bash
  tcpdump -n -r /tmp/home.pcap
  ```

* подробнее:

  ```bash
  tcpdump -n -vv -r /tmp/home.pcap
  ```

* показать дамп данных (hex + ASCII):

  ```bash
  tcpdump -n -vv -X -r /tmp/home.pcap
  ```

* чтобы прокручивать:

  ```bash
  tcpdump -n -r /tmp/home.pcap | less
  ```

* отфильтровать, например, только HTTP (tcp порт 80):

  ```bash
  tcpdump -n -r /tmp/home.pcap tcp port 80
  ```

Главное: ключ `-r` говорит `tcpdump` читать из файла, а не с интерфейса.

### Плавающий IP

**Плавающий IP (Floating IP)** - это концепция в сетевых технологиях, особенно популярная в облачных вычислениях. Вот основные аспекты плавающего IP:

1. **Определение**:
   - Это статический IP-адрес, который может быть динамически переназначен другому устройству или ресурсу в сети.
2. **Основные характеристики**:
   - Не привязан постоянно к конкретному устройству или виртуальной машине.
   - Может быть быстро перенаправлен с одного ресурса на другой.
3. **Применение**:
   - Часто используется в облачных средах для обеспечения высокой доступности.
   - Применяется при балансировке нагрузки между серверами.
4. **Преимущества**:
   - Позволяет быстро переключаться между резервными серверами в случае сбоя.
   - Упрощает процесс обновления и обслуживания без простоев.
5. **Примеры использования**:
   - Перенаправление трафика с неисправного сервера на резервный.
   - Обновление приложений без прерывания обслуживания.
6. **Технические аспекты**:
   - Обычно реализуется на уровне провайдера облачных услуг.
   - Может требовать специальной настройки сетевого оборудования.
7. **Отличие от статического IP**:
   - Статический IP постоянно привязан к одному устройству.
   - Плавающий IP может быть легко перемещен между устройствами.

### Проблема: Network Manager не устанавливает шлюз (gateway) для OpenVPN-соединения

#### Решение 1

- Получить UUID OpenVPN-соединения с помощью `nmcli con show`
- Установить шлюз вручную: `nmcli con mod <UUID> ipv4.gateway <IP-адрес>`
- Побочный эффект: создаются "зомби"-соединения tun0, которые сохраняются после перезагрузки.
- Удаление "зомби"-соединений: nmcli con del tun0

#### Решение 2

- `sudo nmcli connection modify vpnu-us-mia ipv4.route-metric 0`
    - Эта команда изменяет метрику маршрута для VPN-соединения.
    - vpnu-us-mia - это имя VPN-соединения (может отличаться в вашем случае).
    - ipv4.route-metric 0 устанавливает метрику маршрута в 0.
    - Пояснение:
        - Метрика маршрута определяет приоритет маршрута. Чем ниже значение, тем выше - приоритет.
        - По умолчанию, ethernet-соединение имело метрику 1.
        - Установка метрики VPN в 0 делает его приоритетнее, чем стандартное соединение.

