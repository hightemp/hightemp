- https://www.kernel.org/doc/Documentation/filesystems/proc.txt

# /proc ФАЙЛОВАЯ СИСТЕМА

### /proc/sys 
Terrehon Bowden <terrehon@pacbell.net>        7 октября 1999
Bodo Bauer <bb@ricochet.net>

### 2.4.x обновление	  
Jorge Nerin <comandante@zaralinux.com>      14 ноября 2000
перенос /proc/sys	  
Shen Feng <shen@cn.fujitsu.com>		  1 апреля 2009

Версия 1.3                                            
Версия ядра 2.2.12
Версия ядра 2.4.0-test11-pre4

исправления/обновления часть 1.1  
Stefani Seibold <stefani@seibold.net>       9 июня 2009

#### Оглавление

- 0   Предисловие
- 0.1 Введение/Благодарности
- 0.2 Юридическая информация

- 1	Сбор информации о системе
- 1.1	Специфические для процесса подкаталоги
- 1.2	Данные ядра
- 1.3	IDE устройства в /proc/ide
- 1.4	Информация о сети в /proc/net
- 1.5	SCSI информация
- 1.6	Информация об параллельных портах в /proc/parport
- 1.7	TTY информация в /proc/tty
- 1.8	Различная статистика ядра в /proc/stat
- 1.9	Параметры файловой системы Ext4

- 2	Изменение системных параметров

- 3	Параметры для каждого процесса
- 3.1	/proc/<pid>/oom_adj и /proc/<pid>/oom_score_adj - Настройка оценки oom-killer
- 3.2	/proc/<pid>/oom_score - Отображение текущей оценки oom-killer
- 3.3	/proc/<pid>/io - Показать поля учета ввода/вывода
- 3.4	/proc/<pid>/coredump_filter - Настройки фильтрации дампов памяти
- 3.5	/proc/<pid>/mountinfo - Информация о монтировании
- 3.6	/proc/<pid>/comm и /proc/<pid>/task/<tid>/comm
- 3.7   /proc/<pid>/task/<tid>/children - Информация о детях задачи
- 3.8   /proc/<pid>/fdinfo/<fd> - Информация о открытом файле
- 3.9   /proc/<pid>/map_files - Информация о отображенных в памяти файлах
- 3.10  /proc/<pid>/timerslack_ns - Значение таймера задачи
- 3.11	/proc/<pid>/patch_state - Состояние операции наложения патча в реальном времени
- 3.12	/proc/<pid>/arch_status - Информация о специфической архитектуре задачи

- 4	Настройка procfs
- 4.1	Параметры монтирования

---

### Предисловие

#### 0.1 Введение/Благодарности

Данная документация является частью книги, ожидаемой (надеемся так) к выпуску по дистрибутиву Linux SuSE. Поскольку нет полной документации для файловой системы /proc, и мы использовали множество свободных источников для написания этих глав, кажется справедливым отдать работу обратно сообществу Linux. Эта работа основана на версии ядра 2.2.* и предстоящей 2.4.*. Мы опасаемся, что она все еще далека от завершения, но надеемся, что она будет полезной. Насколько нам известно, это первый 'все-в-одном' документ о файловой системе /proc. Он сосредоточен на аппаратуре Intel x86, поэтому если вы ищете функции PPC, ARM, SPARC, AXP и т. д., вероятно, не найдете то, что ищете. Он также охватывает только сетевые возможности IPv4, не IPv6 или другие протоколы - извините. Но дополнения и патчи приветствуются и будут добавлены в этот документ, если вы отправите их Bodo.

Мы хотели бы поблагодарить Алана Кокса, Рика ван Риэля и Алексея Кузнецова, а также многих других людей за помощь в составлении этой документации. Мы также хотели бы выразить особую благодарность Анди Клену за документацию, на которую мы очень полагались для создания этого документа, а также за дополнительную информацию, которую он предоставил. Спасибо всем остальным, кто внес вклад в исходный код или документацию ядра Linux и помог создать отличное программное обеспечение... :)

Если у вас есть какие-либо комментарии, исправления или дополнения, пожалуйста, не стесняйтесь обращаться к Бодо Бауэру по адресу bb@ricochet.net. Мы будем рады добавить их в этот документ.

Последняя версия этого документа доступна онлайн по адресу http://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html

Если вы не можете использовать указанное выше направление, вы можете попробовать список рассылки для ядра на linux-kernel@vger.kernel.org и/или попытаться связаться со мной по адресу comandante@zaralinux.com.

### 0.2 Юридическая информация

Мы не гарантируем правильность данного документа, и если вы обратитесь к нам, жалуясь на то, что вы испортили свою систему из-за неправильной документации, мы не почувствуем себя ответственными...

---

## ГЛАВА 1: СБОР ИНФОРМАЦИИ О СИСТЕМЕ

---

В этой главе:

* Исследование свойств псевдофайловой системы /proc и ее способности предоставлять информацию о запущенной системе Linux
* Изучение структуры /proc
* Получение различной информации о ядре и процессах, запущенных в системе

Файловая система proc действует как интерфейс к внутренним структурам данных в ядре. Ее можно использовать для получения информации о системе и изменения определенных параметров ядра во время выполнения (sysctl).

Сначала мы рассмотрим только для чтения части /proc. В главе 2 мы покажем вам, как вы можете использовать /proc/sys для изменения параметров.

### 1.1 Специфические для процесса подкаталоги

Каталог /proc содержит (среди прочего) подкаталог для каждого процесса, запущенного в системе, который назван идентификатором процесса (PID).

Ссылка self указывает на процесс, читающий файловую систему. В каждом подкаталоге процесса перечислены записи, перечисленные в таблице 1-1.

Обратите внимание, что открытие дескриптора файла к /proc/<pid> или к любому из содержащихся файлов или подкаталогов не предотвращает использование <pid> для другого процесса в случае, если <pid> завершится. Операции над открытыми дескрипторами файлов /proc/<pid>, соответствующими вышедшим из строя процессам, обычно не влияют на любой новый процесс, который ядро может случайно назначить идентификатор процесса <pid>. Вместо этого операции над этими FD обычно завершаются ошибкой ESRCH.

Таблица 1-1: Специфические для процесса записи в /proc
..............................................................................
Файл		Содержание
clear_refs	Сбрасывает биты, связанные с использованием страниц, показанные в выходе smaps
cmdline		Аргументы командной строки
cpu			Текущий и последний процессор, на котором он был выполнен (2.4)(smp)
cwd			Ссылка на текущий рабочий каталог
environ		Значения переменных окружения
exe			Ссылка на исполняемый файл этого процесса
fd			Каталог, содержащий все дескрипторы файлов
maps		Карты памяти для исполняемых файлов и библиотек (2.4)
mem			Память, удерживаемая этим процессом
root		Ссылка на корневой каталог этого процесса
stat		Статус процесса
statm		Информация о статусе памяти процесса
status		Статус процесса в удобочитаемой форме
wchan		Присутствует с CONFIG_KALLSYMS=y: показывает функцию ядра, в которой заблокирована задача - или "0", если не заблокирована.
pagemap		Таблица страниц
stack		Отчет о полном стеке трассировки, включить через CONFIG_STACKTRACE
smaps		Расширение на основе карты, показывающее потребление памяти каждого отображения и связанные с ним флаги
smaps_rollup	Накопленная статистика smaps для всех отображений процесса. Это может быть выведено из smaps, но быстрее и удобнее
numa_maps	Расширение на основе карты, отображающее локальность памяти и политику привязки, а также использование памяти (в страницах) каждого отображения.
..............................................................................

Например, чтобы получить информацию о статусе процесса, вам нужно прочитать файл /proc/PID/status:

```shell
cat /proc/self/status
```

Это предоставляет вам почти ту же информацию, которую вы получите, если посмотрите ее с помощью команды ps. Фактически, ps использует файловую систему proc для получения своей информации. Но вы получаете более подробное представление о процессе, прочитав файл /proc/PID/status. Его поля описаны в таблице 1-2.

Файл statm содержит более подробную информацию об использовании памяти процесса. Его семь полей объяснены в таблице 1-3. Файл stat содержит детальную информацию о самом процессе. Его поля объяснены в таблице 1-4.