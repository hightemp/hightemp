# Как настроить новый проект TypeScript

## Шаг 1 — Начало проекта TypeScript

Чтобы начать ваш проект на TypeScript, вам необходимо создать директорию для вашего проекта:

```
mkdir typescript-project
```

Теперь перейдите в директорию проекта:

```
cd typescript-project
```

Теперь, когда директория проекта готова, вы можете установить TypeScript:

```
npm i typescript --save-dev
```

Важно использовать флаг `--save-dev`, потому что он сохраняет TypeScript как зависимость разработки. Это означает, что TypeScript требуется для разработки вашего проекта.

С установленным TypeScript, вы можете инициализировать ваш проект TypeScript, используя следующую команду:

```
npx tsc --init
```

npm также включает инструмент под названием npx, который запускает исполняемые пакеты. npx позволяет нам запускать пакеты без необходимости устанавливать их глобально.

Команда tsc используется здесь, потому что это встроенный компилятор TypeScript. Когда вы пишете код на TypeScript, запуск tsc будет преобразовывать или компилировать ваш код в JavaScript.

Использование флага `--init` в приведенной выше команде инициализирует ваш проект, создавая файл `tsconfig.json` в директории вашего проекта typescript-project. Файл `tsconfig.json` позволит вам дополнительно настроить и настроить взаимодействие TypeScript и компилятора tsc. Вы можете удалять, добавлять и изменять конфигурации в этом файле, чтобы они лучше соответствовали вашим потребностям.

Откройте `tsconfig.json` в вашем редакторе, чтобы найти конфигурацию по умолчанию:

```
nano tsconfig.json
```

Будет много опций, большинство из которых закомментированы:

```json
{
  "compilerOptions": {
    /* Посетите https://aka.ms/tsconfig.json чтобы узнать больше об этом файле */

    /* Проекты */
    // "incremental": true,                              /* Включить инкрементальную компиляцию */
    // "composite": true,                                /* Включить ограничения, позволяющие использовать проект TypeScript с проектными ссылками. */
    // "tsBuildInfoFile": "./",                          /* Укажите папку для файлов инкрементальной компиляции .tsbuildinfo. */
    // "disableSourceOfProjectReferenceRedirect": true,  /* Отключить предпочтение исходных файлов вместо файлов объявлений при ссылке на составные проекты */
    // "disableSolutionSearching": true,                 /* Исключить проект из многопроектной проверки ссылок при редактировании. */
    // "disableReferencedProjectLoad": true,             /* Уменьшить количество проектов, загружаемых автоматически TypeScript. */
  }
}
```

Вы можете настраивать вашу конфигурацию TypeScript через файл `tsconfig.json`. Например, можно рассмотреть возможность раскомментирования записи `outDir` и установки ее в `"./build"`, которая поместит все ваши скомпилированные файлы TypeScript в эту директорию.

С установленным TypeScript и файлом `tsconfig.json` на месте, вы теперь можете перейти к написанию кода вашего приложения TypeScript и его компиляции.

Обратите внимание: Шаг 3 ниже заменит многие из ваших конфигураций разумными умолчаниями, но эти изменения помогут вам начать работу прямо сейчас.

## Шаг 2 — Компиляция проекта TypeScript

Теперь вы можете начать писать код для вашего проекта TypeScript. Откройте новый файл с именем `index.ts` в вашем редакторе. Напишите следующий код TypeScript в `index.ts`:

```typescript
const world = 'world';

export function hello(who: string = world): string {
  return `Hello ${who}!`;
}
```

С этим кодом TypeScript ваш проект готов к компиляции. Запустите tsc из директории вашего проекта:

```
npx tsc
```

Вы заметите, что скомпилированные файлы JavaScript `index.js` и файл карта исходников `index.js.map` были добавлены в папку build, если вы указали это в файле `tsconfig.js`.

Откройте `index.js`, и вы найдете следующий скомпилированный JavaScript код:

```javascript
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.hello = void 0;
const world = 'world';
function hello(who = world) {
  return `Hello ${who}!`;
}
exports.hello = hello;
```

Запуск компилятора TypeScript каждый раз, когда вы вносите изменения, может быть утомительным. Чтобы исправить это, вы можете поставить компилятор в режим наблюдения, который будет перекомпилировать ваш код каждый раз при внесении изменений.

Вы можете активировать режим наблюдения с помощью следующей команды:

```
npx tsc -w
```

Вы узнали, как работает компилятор TypeScript, и теперь вы можете успешно компилировать файлы TypeScript. Вы можете поднять свои проекты TypeScript на новый уровень, включив в свой рабочий процесс линтер.

## Шаг 3 — Использование Google TypeScript Style для линтинга и коррекции кода

Использование линтера при программировании поможет вам быстро находить несоответствия, ошибки синтаксиса и пропуски в вашем коде. Кроме того, руководство по стилю не только поможет вам гарантировать, что ваш код хорошо сформирован и последователен, но также позволит вам использовать дополнительные инструменты для обеспечения этого стиля. Одним из таких инструментов является eslint, который хорошо работает с многими IDE, помогая в процессе разработки.

Теперь, когда ваш проект настроен, вы можете использовать другие инструменты в экосистеме TypeScript, чтобы помочь и избежать необходимости настраивать линтинг и конфигурацию в файле `tsconfig.json` вручную. Один из таких инструментов — Google TypeScript Style. Google TypeScript Style, известный как GTS, это руководство по стилю, линтер и автоматический корректор кода в одном. Использование GTS поможет вам быстро начать новый проект TypeScript и избежать сосредоточения на мелких организационных деталях, чтобы сосредоточиться на проектировании вашего проекта. GTS также предлагает мнение по умолчанию. Это означает, что вам не придется много настраивать конфигурацию.

Начните с установки GTS:

```
npm i gts --save-dev
```

Отсюда инициализируйте GTS, используя следующую команду:

```
npx gts init
```

Приведенная выше команда сгенерирует все, что вам нужно для начала работы с вашим TypeScript, включая файл `tsconfig.json` и настройку линтинга. Файл `package.json` также будет создан, если он уже не существует.

Запуск `npx gts init` также добавит полезные npm скрипты в ваш файл `package.json`. Например, теперь можно запустить `npm run compile`, чтобы скомпилировать ваш проект TypeScript. Для проверки на наличие ошибок линтинга теперь можно запустить `npm run check`.

Обратите внимание: Установка TypeScript перед установкой GTS гарантирует, что у вас будет самая последняя версия TypeScript при разработке вашего приложения. В результате более медленного развития GTS по сравнению с TypeScript, вы можете обнаружить, что он предложит понизить версию TypeScript в ваших зависимостях разработки. Вы можете указать GTS не перезаписывать это значение, если вам нужны новые функции.

Кроме того, поскольку линтер eslint для TypeScript поддерживает ряд версий TypeScript, новые версии языка могут выходить за пределы этого диапазона. В таком случае eslint предупредит вас об этом. Есть хороший шанс, что он будет продолжать работать нормально, но если у вас возникнут проблемы, вы можете понизить версию TypeScript, указав ее при установке. Например, `npm i typescript@4.4.2 --save-dev`.

GTS теперь установлен и правильно интегрирован в ваш проект TypeScript. Использование GTS в будущих проектах позволит вам быстро настроить новые проекты TypeScript с необходимыми конфигурациями на месте.

Поскольку GTS предоставляет авторитарный подход без конфигурации, он будет использовать свои собственные разумные правила линтинга и исправления. Они следуют многим передовым практикам, но если вам нужно каким-то образом изменить правила, вы можете сделать это, расширив правила eslint по умолчанию. Для этого создайте файл в директории вашего проекта с именем `.eslintrc`, который расширяет стилевые правила:

```yaml
extends:
  - './node_modules/gts'
```

Это позволит вам добавлять или изменять стилевые правила, предоставленные GTS.